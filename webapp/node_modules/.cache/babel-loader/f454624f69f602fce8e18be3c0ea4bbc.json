{"ast":null,"code":"export function withReduxDevtools(store) {\n  let devtools = window.__REDUX_DEVTOOLS_EXTENSION__;\n\n  if (!devtools) {\n    console.error('Undux withReduxDevtools plugin: Cannot find Redux Devtools browser extension. Is it installed?');\n    return store;\n  }\n\n  let devTools = devtools.connect();\n  let wasTriggeredByDevtools = false;\n\n  let jumpToState = newState => {\n    let oldState = store.getState();\n\n    for (let key in newState) {\n      if (key in oldState) {\n        wasTriggeredByDevtools = true;\n        store.set(key)(newState[key]);\n        wasTriggeredByDevtools = false;\n      }\n    }\n  };\n\n  devTools.subscribe(message => {\n    switch (message.type) {\n      case 'START':\n        devTools.send(null, store.getState());\n        return;\n\n      case 'DISPATCH':\n        if (!message.state) {\n          return;\n        }\n\n        switch (message.payload.type) {\n          case 'JUMP_TO_ACTION':\n          case 'JUMP_TO_STATE':\n            jumpToState(JSON.parse(message.state));\n        }\n\n    }\n  });\n  store.onAll().subscribe(({\n    key\n  }) => {\n    if (wasTriggeredByDevtools) {\n      return;\n    }\n\n    devTools.send(key, store.getState());\n  });\n  return store;\n}","map":{"version":3,"sources":["../../src/plugins/withReduxDevtools.ts"],"names":[],"mappings":"AAEA,OAAM,SAAU,iBAAV,CACJ,KADI,EACyB;AAE7B,MAAI,QAAQ,GAAG,MAAM,CAAC,4BAAtB;;AAEA,MAAI,CAAC,QAAL,EAAe;AACb,IAAA,OAAO,CAAC,KAAR,CACE,gGADF;AAGA,WAAO,KAAP;AACD;;AAED,MAAI,QAAQ,GAAG,QAAQ,CAAC,OAAT,EAAf;AACA,MAAI,sBAAsB,GAAG,KAA7B;;AAEA,MAAI,WAAW,GAAI,QAAD,IAAoB;AACpC,QAAI,QAAQ,GAAG,KAAK,CAAC,QAAN,EAAf;;AACA,SAAK,IAAI,GAAT,IAAgB,QAAhB,EAA0B;AACxB,UAAI,GAAG,IAAI,QAAX,EAAqB;AACnB,QAAA,sBAAsB,GAAG,IAAzB;AACA,QAAA,KAAK,CAAC,GAAN,CAAU,GAAV,EAA8B,QAAQ,CAAC,GAAD,CAAtC;AACA,QAAA,sBAAsB,GAAG,KAAzB;AACD;AACF;AACF,GATD;;AAWA,EAAA,QAAQ,CAAC,SAAT,CAAmB,OAAO,IAAG;AAC3B,YAAQ,OAAO,CAAC,IAAhB;AACE,WAAK,OAAL;AACE,QAAA,QAAQ,CAAC,IAAT,CAAc,IAAd,EAAoB,KAAK,CAAC,QAAN,EAApB;AACA;;AACF,WAAK,UAAL;AACE,YAAI,CAAC,OAAO,CAAC,KAAb,EAAoB;AAClB;AACD;;AACD,gBAAQ,OAAO,CAAC,OAAR,CAAgB,IAAxB;AACE,eAAK,gBAAL;AACA,eAAK,eAAL;AACE,YAAA,WAAW,CAAC,IAAI,CAAC,KAAL,CAAW,OAAO,CAAC,KAAnB,CAAD,CAAX;AAHJ;;AARJ;AAcD,GAfD;AAiBA,EAAA,KAAK,CAAC,KAAN,GAAc,SAAd,CAAwB,CAAC;AAAE,IAAA;AAAF,GAAD,KAAY;AAClC,QAAI,sBAAJ,EAA4B;AAC1B;AACD;;AACD,IAAA,QAAQ,CAAC,IAAT,CAAc,GAAd,EAAmB,KAAK,CAAC,QAAN,EAAnB;AACD,GALD;AAOA,SAAO,KAAP;AACD","sourceRoot":"","sourcesContent":["export function withReduxDevtools(store) {\n    let devtools = window.__REDUX_DEVTOOLS_EXTENSION__;\n    if (!devtools) {\n        console.error('Undux withReduxDevtools plugin: Cannot find Redux Devtools browser extension. Is it installed?');\n        return store;\n    }\n    let devTools = devtools.connect();\n    let wasTriggeredByDevtools = false;\n    let jumpToState = (newState) => {\n        let oldState = store.getState();\n        for (let key in newState) {\n            if (key in oldState) {\n                wasTriggeredByDevtools = true;\n                store.set(key)(newState[key]);\n                wasTriggeredByDevtools = false;\n            }\n        }\n    };\n    devTools.subscribe(message => {\n        switch (message.type) {\n            case 'START':\n                devTools.send(null, store.getState());\n                return;\n            case 'DISPATCH':\n                if (!message.state) {\n                    return;\n                }\n                switch (message.payload.type) {\n                    case 'JUMP_TO_ACTION':\n                    case 'JUMP_TO_STATE':\n                        jumpToState(JSON.parse(message.state));\n                }\n        }\n    });\n    store.onAll().subscribe(({ key }) => {\n        if (wasTriggeredByDevtools) {\n            return;\n        }\n        devTools.send(key, store.getState());\n    });\n    return store;\n}\n//# sourceMappingURL=withReduxDevtools.js.map"]},"metadata":{},"sourceType":"module"}